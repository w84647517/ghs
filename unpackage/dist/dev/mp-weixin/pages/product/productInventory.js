(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/product/productInventory"],{117:function(t,n,e){"use strict";(function(t){e(5);r(e(3));var n=r(e(118));function r(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=e,t(n.default)}).call(this,e(1)["createPage"])},118:function(t,n,e){"use strict";e.r(n);var r=e(119),i=e(121);for(var o in i)"default"!==o&&function(t){e.d(n,t,(function(){return i[t]}))}(o);e(123);var u,c=e(11),s=Object(c["default"])(i["default"],r["render"],r["staticRenderFns"],!1,null,"54d3b746",null,!1,r["components"],u);s.options.__file="pages/product/productInventory.vue",n["default"]=s.exports},119:function(t,n,e){"use strict";e.r(n);var r=e(120);e.d(n,"render",(function(){return r["render"]})),e.d(n,"staticRenderFns",(function(){return r["staticRenderFns"]})),e.d(n,"recyclableRender",(function(){return r["recyclableRender"]})),e.d(n,"components",(function(){return r["components"]}))},120:function(t,n,e){"use strict";var r;e.r(n),e.d(n,"render",(function(){return i})),e.d(n,"staticRenderFns",(function(){return u})),e.d(n,"recyclableRender",(function(){return o})),e.d(n,"components",(function(){return r}));try{r={uInput:function(){return Promise.all([e.e("common/vendor"),e.e("uview-ui/components/u-input/u-input")]).then(e.bind(null,323))},uTable:function(){return e.e("uview-ui/components/u-table/u-table").then(e.bind(null,331))},uTr:function(){return e.e("uview-ui/components/u-tr/u-tr").then(e.bind(null,338))},uTd:function(){return e.e("uview-ui/components/u-td/u-td").then(e.bind(null,345))},uTh:function(){return e.e("uview-ui/components/u-th/u-th").then(e.bind(null,352))},uniPopup:function(){return e.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(e.bind(null,238))},uniPopupDialog:function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog")]).then(e.bind(null,245))},uActionSheet:function(){return e.e("uview-ui/components/u-action-sheet/u-action-sheet").then(e.bind(null,359))}}}catch(c){if(-1===c.message.indexOf("Cannot find module")||-1===c.message.indexOf(".vue"))throw c;console.error(c.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var i=function(){var t=this,n=t.$createElement,e=(t._self._c,t.allList.length?t.__map(t.allList,(function(n,e){var r=t.__get_orig(n),i=((Number(n.unitPrice*(n.scale/100))+Number(n.unitPrice))*Number(n.count)).toFixed(2);return{$orig:r,g0:i}})):null);t.$mp.data=Object.assign({},{$root:{l0:e}})},o=!1,u=[];i._withStripped=!0},121:function(t,n,e){"use strict";e.r(n);var r=e(122),i=e.n(r);for(var o in r)"default"!==o&&function(t){e.d(n,t,(function(){return r[t]}))}(o);n["default"]=i.a},122:function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=u(e(24)),i=e(13),o=e(72);function u(t){return t&&t.__esModule?t:{default:t}}function c(t,n,e,r,i,o,u){try{var c=t[o](u),s=c.value}catch(a){return void e(a)}c.done?n(s):Promise.resolve(s).then(r,i)}function s(t){return function(){var n=this,e=arguments;return new Promise((function(r,i){var o=t.apply(n,e);function u(t){c(o,r,i,u,s,"next",t)}function s(t){c(o,r,i,u,s,"throw",t)}u(void 0)}))}}function a(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function l(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?a(Object(e),!0).forEach((function(n){f(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):a(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function f(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var d={data:function(){return{systemName:"",selfProducts:[],actionList:[{text:"简单导出"},{text:"分类导出"}],actionShow:!1,isSave:!1,allList:[]}},onLoad:function(){this.selfProducts=JSON.parse(JSON.stringify(this.allProducts)),this.allList=this.allList.concat(this.selfProducts),this.allListSelect=JSON.parse(JSON.stringify(this.allSelected))},computed:l(l({},(0,i.mapGetters)(["getCartList","getProductList"])),{},{allProducts:function(){var t=[];return this.getCartList.map((function(n){n.products.map((function(n){n.selected&&t.push(n)}))})),t},allSelected:function(){var t=JSON.parse(JSON.stringify(this.getCartList));return t.map((function(t){return t.products=t.products.filter((function(t){return t.selected})),t}))},allPrice:function(){var t=0;return this.allList.map((function(n){t+=(Number(n.unitPrice*(n.scale/100))+Number(n.unitPrice))*Number(n.count)})),t.toFixed(2)}}),methods:l(l({},(0,i.mapMutations)(["clearCart"])),{},{actionClick:function(n){var e=this;return s(r.default.mark((function i(){var u,c;return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return u=e.allListSelect.map((function(t){return t.classificationEntityList=t.classificationEntityList.filter((function(t){return t.id})),t})),r.next=3,(0,o.exportInventory)({classificationEntityList:u,system:e.systemName,type:0==n?1:2});case 3:if(c=r.sent,500!=c.code){r.next=7;break}return t.showToast({title:c.msg,icon:"none",duration:5e3}),r.abrupt("return");case 7:t.setClipboardData({data:c.url,showToast:!1,success:function(){t.showToast({title:"已复制到剪贴板请在浏览器中打开",icon:"none"})}});case 8:case"end":return r.stop()}}),i)})))()},exportInven:function(){""==this.systemName.trim()?t.showToast({icon:"none",title:"请输入工程名"}):this.actionShow=!0},dialogInputConfirm:function(n){var e=this;return s(r.default.mark((function i(){var u;return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n.trim()){r.next=5;break}return t.showToast({icon:"none",title:"请输入清单名称"}),r.abrupt("return");case 5:return r.next=7,(0,o.saveInventory)({name:n,contents:JSON.stringify(e.allListSelect),totalPrice:e.allPrice});case 7:u=r.sent,e.$refs.dialog.close(),0==u.code?(t.showToast({title:"保存成功",icon:"success"}),e.clearCart(),e.isSave=!0):t.showToast({title:"保存失败",icon:"error"});case 10:case"end":return r.stop()}}),i)})))()},dialogInputClose:function(){this.$refs.dialog.close()},saveInventory:function(){this.$refs.dialog.open()},toBack:function(){t.switchTab({url:"../cart/cart"})}})};n.default=d}).call(this,e(1)["default"])},123:function(t,n,e){"use strict";e.r(n);var r=e(124),i=e.n(r);for(var o in r)"default"!==o&&function(t){e.d(n,t,(function(){return r[t]}))}(o);n["default"]=i.a},124:function(t,n,e){},59:function(t,n,e){"use strict";e.r(n);var r=e(60),i=e(62);for(var o in i)"default"!==o&&function(t){e.d(n,t,(function(){return i[t]}))}(o);e(64);var u,c=e(11),s=Object(c["default"])(i["default"],r["render"],r["staticRenderFns"],!1,null,"413e7fe0",null,!1,r["components"],u);s.options.__file="uview-ui/components/u-toast/u-toast.vue",n["default"]=s.exports},60:function(t,n,e){"use strict";e.r(n);var r=e(61);e.d(n,"render",(function(){return r["render"]})),e.d(n,"staticRenderFns",(function(){return r["staticRenderFns"]})),e.d(n,"recyclableRender",(function(){return r["recyclableRender"]})),e.d(n,"components",(function(){return r["components"]}))},61:function(t,n,e){"use strict";var r;e.r(n),e.d(n,"render",(function(){return i})),e.d(n,"staticRenderFns",(function(){return u})),e.d(n,"recyclableRender",(function(){return o})),e.d(n,"components",(function(){return r}));try{r={uIcon:function(){return e.e("uview-ui/components/u-icon/u-icon").then(e.bind(null,161))}}}catch(c){if(-1===c.message.indexOf("Cannot find module")||-1===c.message.indexOf(".vue"))throw c;console.error(c.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var i=function(){var t=this,n=t.$createElement;t._self._c},o=!1,u=[];i._withStripped=!0},62:function(t,n,e){"use strict";e.r(n);var r=e(63),i=e.n(r);for(var o in r)"default"!==o&&function(t){e.d(n,t,(function(){return r[t]}))}(o);n["default"]=i.a},63:function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e={name:"u-toast",props:{zIndex:{type:[Number,String],default:""}},data:function(){return{isShow:!1,timer:null,config:{params:{},title:"",type:"",duration:2e3,isTab:!1,url:"",icon:!0,position:"center",callback:null,back:!1},tmpConfig:{}}},computed:{iconName:function(){if(["error","warning","success","info"].indexOf(this.tmpConfig.type)>=0&&this.tmpConfig.icon){var t=this.$u.type2icon(this.tmpConfig.type);return t}},uZIndex:function(){return this.isShow?this.zIndex?this.zIndex:this.$u.zIndex.toast:"999999"}},methods:{show:function(t){var n=this;this.tmpConfig=this.$u.deepMerge(this.config,t),this.timer&&(clearTimeout(this.timer),this.timer=null),this.isShow=!0,this.timer=setTimeout((function(){n.isShow=!1,clearTimeout(n.timer),n.timer=null,"function"===typeof n.tmpConfig.callback&&n.tmpConfig.callback(),n.timeEnd()}),this.tmpConfig.duration)},hide:function(){this.isShow=!1,this.timer&&(clearTimeout(this.timer),this.timer=null)},timeEnd:function(){if(this.tmpConfig.url){if("/"!=this.tmpConfig.url[0]&&(this.tmpConfig.url="/"+this.tmpConfig.url),Object.keys(this.tmpConfig.params).length){var n="";/.*\/.*\?.*=.*/.test(this.tmpConfig.url)?(n=this.$u.queryParams(this.tmpConfig.params,!1),this.tmpConfig.url=this.tmpConfig.url+"&"+n):(n=this.$u.queryParams(this.tmpConfig.params),this.tmpConfig.url+=n)}this.tmpConfig.isTab?t.switchTab({url:this.tmpConfig.url}):t.navigateTo({url:this.tmpConfig.url})}else this.tmpConfig.back&&this.$u.route({type:"back"})}}};n.default=e}).call(this,e(1)["default"])},64:function(t,n,e){"use strict";e.r(n);var r=e(65),i=e.n(r);for(var o in r)"default"!==o&&function(t){e.d(n,t,(function(){return r[t]}))}(o);n["default"]=i.a},65:function(t,n,e){}},[[117,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/product/productInventory.js.map